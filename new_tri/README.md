# å¹¶è¡Œä¸‰å¯¹è§’çŸ©é˜µæ±‚è§£å™¨ (Parallel Tridiagonal Solvers)

åŸºäº OpenMP çš„å¹¶è¡Œä¸‰å¯¹è§’çº¿æ€§æ–¹ç¨‹ç»„æ±‚è§£å™¨ï¼Œå®ç°äº†ä¸¤ç§å…ˆè¿›çš„å¹¶è¡Œç®—æ³•ã€‚

å‚è€ƒé¡¹ç›®ï¼š[tanim72/15418-final-project](https://github.com/tanim72/15418-final-project)

## ğŸ“‹ æ¦‚è¿°

æœ¬é¡¹ç›®å®ç°äº†ä¸‰ä¸ªç‰ˆæœ¬çš„è¿½èµ¶æ³•(Thomas Algorithm)æ±‚è§£å™¨ï¼š

### 1. ä¸²è¡Œç‰ˆæœ¬
- **ç»å…¸ Thomas ç®—æ³•**ï¼šä¸¤æ­¥æ¶ˆå…ƒ-å›ä»£ç®—æ³•
  - æ—¶é—´å¤æ‚åº¦: O(n)
  - é«˜æ•ˆä½†ä¸²è¡Œï¼Œå­˜åœ¨æ•°æ®ä¾èµ–

### 2. å¹¶è¡Œç‰ˆæœ¬ - é€’å½’å€å¢ (Recursive Doubling)
- **OpenMP Recursive Doubling**ï¼šé€’å½’å€å¢å¹¶è¡Œç®—æ³•
  - é€šè¿‡é€’å½’å€å¢æ–¹å¼åˆå¹¶å±€éƒ¨è®¡ç®—ç»“æœ
  - é€‚åˆçº¿ç¨‹æ•°è¾ƒå°‘çš„æƒ…å†µ
  - é€šä¿¡è½®æ•°: O(log P)ï¼Œå…¶ä¸­ P æ˜¯çº¿ç¨‹æ•°

### 3. å¹¶è¡Œç‰ˆæœ¬ - Brugnano æ–¹æ³•
- **OpenMP Brugnano**ï¼šåŸºäºè§„çº¦ç³»ç»Ÿçš„å¹¶è¡Œç®—æ³•
  - å…ˆå¯¹å±€éƒ¨ç³»ç»Ÿè¿›è¡Œä¿®æ”¹çš„ Thomas ç®—æ³•
  - æ„å»ºå¹¶æ±‚è§£è§„çº¦ç³»ç»Ÿè·å¾—è¾¹ç•Œå€¼
  - æœ€åæ›´æ–°å†…éƒ¨èŠ‚ç‚¹
  - è´Ÿè½½å¹³è¡¡æ€§å¥½

## ğŸ“ æ–‡ä»¶ç»“æ„

```
new_tri/
â”œâ”€â”€ testGenerator.py                  # æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨
â”œâ”€â”€ sequential_solver.cpp             # ä¸²è¡Œ Thomas ç®—æ³•
â”œâ”€â”€ openmp_recursive_doubling.cpp     # OpenMP é€’å½’å€å¢å®ç°
â”œâ”€â”€ openmp_brugnano.cpp               # OpenMP Brugnano å®ç°
â”œâ”€â”€ Makefile                          # ç¼–è¯‘è„šæœ¬
â””â”€â”€ README.md                         # æœ¬æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¼–è¯‘æ‰€æœ‰ç¨‹åº

```bash
make all
```

æˆ–å•ç‹¬ç¼–è¯‘ï¼š

```bash
g++ -fopenmp -O2 -std=c++11 sequential_solver.cpp -o sequential_solver.exe
g++ -fopenmp -O2 -std=c++11 openmp_recursive_doubling.cpp -o openmp_recursive_doubling.exe
g++ -fopenmp -O2 -std=c++11 openmp_brugnano.cpp -o openmp_brugnano.exe
```

### ç”Ÿæˆæµ‹è¯•æ•°æ®

```bash
python testGenerator.py -n 8192 -o inputs/test_input.txt
```

å‚æ•°è¯´æ˜ï¼š
- `-n`: é—®é¢˜è§„æ¨¡ï¼ˆé»˜è®¤ 1024ï¼‰
- `-o`: è¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤ inputs/test_input.txtï¼‰
- `-s`: éšæœºç§å­ï¼ˆå¯é€‰ï¼‰

### è¿è¡Œæ±‚è§£å™¨

```bash
# è¿è¡Œä¸²è¡Œç‰ˆæœ¬
./sequential_solver.exe inputs/test_input.txt

# è¿è¡Œé€’å½’å€å¢å¹¶è¡Œç‰ˆæœ¬ï¼ˆè‡ªåŠ¨æµ‹è¯• 1,2,4,8 çº¿ç¨‹ï¼‰
./openmp_recursive_doubling.exe inputs/test_input.txt

# è¿è¡Œ Brugnano å¹¶è¡Œç‰ˆæœ¬ï¼ˆè‡ªåŠ¨æµ‹è¯• 1,2,4,8 çº¿ç¨‹ï¼‰
./openmp_brugnano.exe inputs/test_input.txt
```

### ä¸€é”®è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
make run_all
```

### æµ‹è¯•ä¸åŒè§„æ¨¡

```bash
make test
```

è¿™ä¼šæµ‹è¯• 1024, 4096, 8192, 16384 å››ç§è§„æ¨¡ã€‚

## ğŸ“Š è¾“å…¥æ ¼å¼

æµ‹è¯•æ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼š

```
N                                    # ç³»ç»Ÿå¤§å°
b[0] b[1] ... b[N-1]                # ä¸»å¯¹è§’çº¿
a[1] a[2] ... a[N-1]                # ä¸‹å¯¹è§’çº¿ï¼ˆa[0] = 0ï¼‰
c[0] c[1] ... c[N-2]                # ä¸Šå¯¹è§’çº¿ï¼ˆc[N-1] = 0ï¼‰
d[0] d[1] ... d[N-1]                # å³ç«¯é¡¹
```

çŸ©é˜µå½¢å¼ï¼š
```
[b[0]  c[0]   0    ...    0  ] [x[0]]   [d[0]]
[a[1]  b[1]  c[1]  ...    0  ] [x[1]]   [d[1]]
[ 0    a[2]  b[2]  ...    0  ] [x[2]] = [d[2]]
[...   ...   ...   ...   ... ] [ ... ]  [ ... ]
[ 0     0     0   a[N-1] b[N-1]] [x[N-1]] [d[N-1]]
```

## ğŸ”¬ ç®—æ³•åŸç†

### é€’å½’å€å¢ (Recursive Doubling)

1. **å±€éƒ¨è®¡ç®—**ï¼šæ¯ä¸ªçº¿ç¨‹è®¡ç®—å±€éƒ¨ç³»æ•°çŸ©é˜µ R
2. **é€’å½’å€å¢**ï¼šé€šè¿‡ log(P) è½®é€šä¿¡åˆå¹¶ç»“æœ
3. **è¾¹ç•Œæ±‚è§£**ï¼šè®¡ç®—åˆ†å—è¾¹ç•Œçš„è§£
4. **å®Œæ•´æ±‚è§£**ï¼šæ„å»ºå®Œæ•´çš„ d å’Œ l æ•°ç»„
5. **å‰å‘å›ä»£**ï¼šæœ€ç»ˆçš„å‰å‘æ¶ˆå…ƒå’Œå›ä»£

### Brugnano æ–¹æ³•

1. **å±€éƒ¨ä¿®æ”¹ Thomas**ï¼šæ¯ä¸ªåˆ†å—åº”ç”¨ç‰¹æ®Šçš„æ¶ˆå…ƒä¿ç•™è¾¹ç•Œä¿¡æ¯
2. **æ„å»ºè§„çº¦ç³»ç»Ÿ**ï¼šä»å„åˆ†å—è¾¹ç•Œç³»æ•°æ„å»ºå°è§„æ¨¡ç³»ç»Ÿ
3. **æ±‚è§£è§„çº¦ç³»ç»Ÿ**ï¼šä¸²è¡Œæ±‚è§£è·å¾—æ‰€æœ‰è¾¹ç•Œå€¼
4. **æ›´æ–°å†…éƒ¨èŠ‚ç‚¹**ï¼šå„åˆ†å—å¹¶è¡Œæ›´æ–°å†…éƒ¨èŠ‚ç‚¹è§£

## ğŸ“ˆ æ€§èƒ½æµ‹è¯•

ç¨‹åºä¼šè‡ªåŠ¨æµ‹è¯•ä»¥ä¸‹é…ç½®ï¼š
- ä¸²è¡Œç‰ˆæœ¬ï¼ˆåŸºå‡†ï¼‰
- 1 çº¿ç¨‹å¹¶è¡Œï¼ˆéªŒè¯æ­£ç¡®æ€§ï¼‰
- 2 çº¿ç¨‹å¹¶è¡Œ
- 4 çº¿ç¨‹å¹¶è¡Œ
- 8 çº¿ç¨‹å¹¶è¡Œ

è¾“å‡ºåŒ…æ‹¬ï¼š
- æ±‚è§£æ—¶é—´
- æœ€å¤§æ®‹å·®ï¼ˆéªŒè¯ç²¾åº¦ï¼‰
- åŠ é€Ÿæ¯”ï¼ˆç›¸å¯¹äºä¸²è¡Œç‰ˆæœ¬ï¼‰

## ğŸ› ï¸ ç¼–è¯‘è¦æ±‚

- C++ ç¼–è¯‘å™¨æ”¯æŒ C++11 æ ‡å‡†
- OpenMP æ”¯æŒ
- Python 3.xï¼ˆç”¨äºç”Ÿæˆæµ‹è¯•æ•°æ®ï¼‰

### Windows (MinGW/MSYS2)
```bash
g++ -fopenmp -O2 -std=c++11 <source>.cpp -o <output>.exe
```

### Linux/macOS
```bash
g++ -fopenmp -O2 -std=c++11 <source>.cpp -o <output>
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

```bash
# ç”Ÿæˆ 16384 å¤§å°çš„æµ‹è¯•æ•°æ®
python testGenerator.py -n 16384 -o inputs/test_16k.txt

# è¿è¡Œé€’å½’å€å¢ç®—æ³•
./openmp_recursive_doubling.exe inputs/test_16k.txt

# è¿è¡Œ Brugnano ç®—æ³•
./openmp_brugnano.exe inputs/test_16k.txt
```

## ğŸ” éªŒè¯

æ‰€æœ‰æ±‚è§£å™¨éƒ½ä¼šè®¡ç®—æ®‹å·®æ¥éªŒè¯è§£çš„æ­£ç¡®æ€§ï¼š

```
æ®‹å·® = max|A*x - d|
```

é€šå¸¸æ®‹å·®åº”å°äº 1e-10ï¼Œè¡¨æ˜æ•°å€¼ç²¾åº¦è‰¯å¥½ã€‚

## ğŸ“š å‚è€ƒèµ„æ–™

- [CMU 15-418 Final Project - Parallel Tridiagonal Solvers](https://github.com/tanim72/15418-final-project)
- Thomas Algorithm (è¿½èµ¶æ³•)
- Recursive Doubling for Parallel Tridiagonal Solvers
- Brugnano's Method for Parallel Tridiagonal Systems

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜æŠ¥å‘Šå’Œæ”¹è¿›å»ºè®®ï¼

## ğŸ“„ è®¸å¯

æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ç›®çš„ã€‚
